<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PWA 아이콘 생성기</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 { color: #FF6B6B; }
    .preview {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    .icon-box {
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
    }
    canvas {
      border-radius: 20%;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    button {
      background: #FF6B6B;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin: 5px;
    }
    button:hover { background: #EE5A5A; }
    .instructions {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
    }
    .instructions ol { padding-left: 20px; }
    .instructions li { margin: 10px 0; }
  </style>
</head>
<body>
  <h1>대만맛집 PWA 아이콘 생성기</h1>

  <div class="preview">
    <div class="icon-box">
      <h3>512x512</h3>
      <canvas id="canvas512" width="512" height="512"></canvas>
      <br><br>
      <button onclick="download('canvas512', 'icon-512.png')">다운로드</button>
    </div>
    <div class="icon-box">
      <h3>192x192</h3>
      <canvas id="canvas192" width="192" height="192"></canvas>
      <br><br>
      <button onclick="download('canvas192', 'icon-192.png')">다운로드</button>
    </div>
    <div class="icon-box">
      <h3>180x180 (Apple)</h3>
      <canvas id="canvas180" width="180" height="180"></canvas>
      <br><br>
      <button onclick="download('canvas180', 'apple-touch-icon.png')">다운로드</button>
    </div>
  </div>

  <button onclick="downloadAll()">모든 아이콘 다운로드</button>

  <div class="instructions">
    <h3>사용 방법</h3>
    <ol>
      <li>위의 아이콘 미리보기를 확인하세요</li>
      <li>"모든 아이콘 다운로드" 버튼을 클릭하거나 개별 다운로드하세요</li>
      <li>다운로드된 PNG 파일들을 <code>public/icons/</code> 폴더에 저장하세요</li>
      <li>사파리에서 "홈 화면에 추가"하면 이쁜 아이콘이 표시됩니다!</li>
    </ol>
  </div>

  <script>
    const svgContent = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
      <defs>
        <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#FF6B6B"/>
          <stop offset="100%" style="stop-color:#EE5A5A"/>
        </linearGradient>
        <linearGradient id="taiwanGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#FFFFFF"/>
          <stop offset="100%" style="stop-color:#F0F0F0"/>
        </linearGradient>
      </defs>
      <rect width="512" height="512" rx="100" fill="url(#bgGradient)"/>
      <path d="M280 80 C320 90, 350 130, 360 180 C370 230, 365 280, 355 330 C345 380, 320 420, 280 440 C240 460, 200 450, 170 420 C140 390, 130 340, 135 290 C140 240, 160 190, 190 150 C220 110, 250 85, 280 80Z" fill="url(#taiwanGradient)" stroke="#FFFFFF" stroke-width="3" opacity="0.95"/>
      <ellipse cx="265" cy="320" rx="85" ry="35" fill="#FFF5E6" stroke="#E8D5B7" stroke-width="3"/>
      <ellipse cx="265" cy="310" rx="75" ry="28" fill="#FFE4C4"/>
      <ellipse cx="265" cy="305" rx="65" ry="22" fill="#D4A574"/>
      <path d="M210 300 Q230 310 250 295 Q270 280 290 300 Q310 320 320 305" stroke="#F5DEB3" stroke-width="6" fill="none" stroke-linecap="round"/>
      <path d="M215 310 Q235 295 255 315 Q275 335 295 310" stroke="#F5DEB3" stroke-width="5" fill="none" stroke-linecap="round"/>
      <ellipse cx="235" cy="290" rx="18" ry="12" fill="#FFFFFF" stroke="#E8D5B7" stroke-width="2"/>
      <ellipse cx="235" cy="290" rx="10" ry="7" fill="#FFB347"/>
      <rect x="280" y="280" width="25" height="6" rx="3" fill="#90EE90" transform="rotate(-20 292 283)"/>
      <rect x="275" y="290" width="20" height="5" rx="2" fill="#98FB98" transform="rotate(15 285 292)"/>
      <ellipse cx="300" cy="295" rx="15" ry="8" fill="#CD853F" stroke="#8B4513" stroke-width="1"/>
      <path d="M230 250 Q225 235 235 220" stroke="#FFFFFF" stroke-width="4" fill="none" stroke-linecap="round" opacity="0.7"/>
      <path d="M260 245 Q255 225 265 210" stroke="#FFFFFF" stroke-width="4" fill="none" stroke-linecap="round" opacity="0.6"/>
      <path d="M290 250 Q285 230 295 215" stroke="#FFFFFF" stroke-width="4" fill="none" stroke-linecap="round" opacity="0.7"/>
      <rect x="180" y="180" width="8" height="140" rx="4" fill="#8B4513" transform="rotate(25 184 250)"/>
      <rect x="195" y="175" width="8" height="140" rx="4" fill="#A0522D" transform="rotate(20 199 245)"/>
      <ellipse cx="200" cy="160" rx="15" ry="10" fill="#FFF8DC" stroke="#DEB887" stroke-width="2"/>
      <path d="M185 160 Q200 150 215 160" stroke="#DEB887" stroke-width="2" fill="none"/>
      <path d="M320 180 L310 220 L340 220 L330 180 Z" fill="#D2691E" stroke="#8B4513" stroke-width="2"/>
      <circle cx="320" cy="205" r="4" fill="#2F4F4F"/>
      <circle cx="328" cy="210" r="3" fill="#2F4F4F"/>
      <circle cx="315" cy="212" r="3" fill="#2F4F4F"/>
      <ellipse cx="325" cy="180" rx="12" ry="5" fill="#FFFFFF"/>
      <text x="256" y="480" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#FFFFFF" text-anchor="middle" opacity="0.9">TW</text>
    </svg>`;

    function renderToCanvas(canvasId, size) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      const img = new Image();

      const blob = new Blob([svgContent], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(blob);

      img.onload = function() {
        ctx.clearRect(0, 0, size, size);
        ctx.drawImage(img, 0, 0, size, size);
        URL.revokeObjectURL(url);
      };
      img.src = url;
    }

    function download(canvasId, filename) {
      const canvas = document.getElementById(canvasId);
      const link = document.createElement('a');
      link.download = filename;
      link.href = canvas.toDataURL('image/png');
      link.click();
    }

    function downloadAll() {
      setTimeout(() => download('canvas512', 'icon-512.png'), 0);
      setTimeout(() => download('canvas192', 'icon-192.png'), 300);
      setTimeout(() => download('canvas180', 'apple-touch-icon.png'), 600);
    }

    // 페이지 로드 시 모든 캔버스에 아이콘 렌더링
    window.onload = function() {
      renderToCanvas('canvas512', 512);
      renderToCanvas('canvas192', 192);
      renderToCanvas('canvas180', 180);
    };
  </script>
</body>
</html>
