# 기능 명세서

## 1. 홈 화면

### 1.1 헤더
- 앱 타이틀 "🍜 대만맛집정보" 표시
- 우측 로그인/로그아웃 버튼
  - 비로그인: 사용자 아이콘 (클릭 시 로그인 모달)
  - 로그인: 로그아웃 아이콘

### 1.2 퀵 카테고리
- 가로 스크롤 카테고리 버튼
- 카테고리: 전체, 면류, 밥류, 탕류, 만두, 디저트, 길거리음식, 카페, 까르푸

### 1.3 인기 맛집
- 카테고리별 최고 평점 맛집 표시
- 가로 스크롤 카드 레이아웃
- 카테고리 배지 표시

### 1.4 야시장별 맛집
- 야시장 필터 버튼 (전체, 스린, 라오허제, 닝샤, 통화 등)
- 선택된 야시장의 맛집 목록 (최대 6개)

### 1.5 하단 네비게이션
- 홈, 카테고리, 야시장, 도심투어, 맛집알리미 탭

## 2. 카테고리/야시장/도심투어 선택

### 2.1 바텀 시트 UI
- 하단에서 올라오는 선택 시트
- 아이콘과 함께 옵션 목록 표시
- 선택 시 해당 목록 화면으로 이동

## 3. 맛집 목록 화면

### 3.1 헤더
- 뒤로가기 버튼
- 목록 제목 (예: "면류 맛집", "스린야시장")

### 3.2 맛집 카드
- 이미지 (없으면 기본 이미지)
- 맛집명 (한글)
- 맛집명 (중문)
- 평점 (별표시 + 점수)
- 위치 정보

## 4. 맛집 상세 화면

### 4.1 이미지 갤러리
- 메인 이미지 표시
- Google Places 이미지 연동

### 4.2 기본 정보
- 맛집명 (한글/중문)
- 평점
- 영업 상태
- 주소
- 영업시간

### 4.3 추천메뉴
- 메뉴 목록 표시

### 4.4 Google 리뷰 섹션
- Google Places API 연동
- 평점 및 리뷰 수 표시
- 리뷰 내용 미리보기

### 4.5 사용자 리뷰 섹션
- 리뷰 목록 (최신순)
- 리뷰 작성 버튼

### 4.6 외부 링크
- Google Maps 열기
- Google 검색

## 5. 회원 인증

### 5.1 회원가입
- 이름 입력
- 이메일 입력 (중복 체크)
- **이메일 인증 코드 발송** (Resend API)
- **6자리 인증 코드 확인** (10분 유효)
- 비밀번호 입력 (bcrypt 암호화)
- 관리자 등록 (관리자 시크릿 키 필요)

### 5.2 로그인
- 이메일/비밀번호 입력
- JWT 토큰 발급 (쿠키 저장)

### 5.3 로그아웃
- 쿠키 삭제

### 5.4 계정 삭제
- 비밀번호 확인 후 계정 영구 삭제
- 관련 리뷰 데이터도 함께 삭제

## 6. 리뷰 기능

### 6.1 리뷰 작성
- 전체 별점 (필수, 1~5점)
- 세부 별점 (선택)
  - 음식
  - 서비스
  - 분위기
- 리뷰 내용 (텍스트)
- 사진 첨부 (최대 4개)
  - 클라이언트 리사이즈 (800px, 60% 품질)
  - Cloudinary 업로드
- 식사 유형 선택 (아침/브런치/점심/저녁/기타)

### 6.2 리뷰 목록
- 작성자명
- 별점
- 작성일
- 리뷰 내용
- 사진 (있는 경우)

### 6.3 리뷰 수정
- 본인 리뷰만 수정 가능
- 기존 데이터 자동 로드
- 별점, 내용, 사진, 식사 유형 모두 수정 가능

### 6.4 리뷰 삭제
- 본인 리뷰만 삭제 가능
- 삭제 전 확인 모달 표시

## 7. PWA 지원

### 7.1 매니페스트
- 앱 이름: 대만맛집정보
- 테마 색상: #FF6B6B
- 홈 화면 추가 지원

### 7.2 아이콘
- 192x192, 512x512 PNG
- Apple Touch Icon

### 7.3 뷰포트 설정
- 모바일 최적화
- Safe Area 지원 (iOS 노치)

## 8. 기술적 특징

### 8.1 이미지 최적화
- 클라이언트 사이드 리사이즈
- JPEG 압축 (60% 품질)
- Cloudinary CDN 활용

### 8.2 반응형 디자인
- 모바일 퍼스트
- 최대 너비 md (448px) 제한
- 가로 스크롤 영역

### 8.3 성능 최적화
- Next.js App Router
- 정적 데이터 캐싱
- 이미지 lazy loading

## 9. 주변 맛집 찾기 (맛집알리미)

### 9.1 위치 설정
- GPS 기반 현재 위치 자동 탐지
- 주소 검색으로 위치 설정
- 수동 좌표 입력
- 미리 정의된 위치 선택 (주요 야시장, 관광지)

### 9.2 반경 설정
- 500m, 1km, 2km, 3km, 5km 선택 가능
- 기본값: 1km

### 9.3 결과 표시
- 거리순 정렬
- 거리 표시 (예: "350m")
- 맛집 카드 클릭 시 상세 페이지 이동

## 10. 네비게이션 UX

### 10.1 iOS 스타일 스와이프 뒤로가기
- 화면 왼쪽 가장자리에서 스와이프 시작
- 페이지 전체가 오른쪽으로 슬라이드
- 배경 어두워지는 오버레이 효과
- 스와이프 완료 시 페이지 밀어내기 애니메이션
- 스와이프 취소 시 부드러운 복귀

### 10.2 뒤로가기 버튼
- 44x44px 터치 영역 (Apple HIG 권장)
- 반투명 배경으로 가시성 확보
- 둥근 원형 디자인

### 10.3 Safe Area 지원
- iOS 노치/다이나믹 아일랜드 대응
- 헤더 상단 여백 자동 조정

## 11. 사용자 맛집 등록

### 11.1 맛집 검색 (Google Places)
- Google Maps 장소 검색 연동
- 장소명, 주소, 좌표 자동 입력
- 평점, 리뷰 수, 가격대 자동 조회

### 11.2 카테고리 선택
- 면류, 만두, 밥류, 탕류, 디저트, 길거리음식, 카페
- 등록 후 카테고리 수정 가능 (등록자/관리자)

### 11.3 중복 등록 방지
- place_id 기반 중복 체크
- 좌표 기반 근접 맛집 체크 (50m 이내)

### 11.4 등록 권한
- 관리자만 맛집 등록 가능
- 등록자 또는 관리자만 카테고리 수정 가능
- 등록자 본인만 삭제 가능

### 11.5 맛집 정보 수정
- 등록자 또는 관리자만 수정 가능
- 수정 가능 항목: 주소, 특징/메모, 전화번호, 영업시간, 카테고리
- 수정 전 확인 모달 표시
- 변경사항 히스토리 자동 기록

### 11.6 주소 편집 및 좌표 자동 변환
- 주소 입력 필드에서 직접 편집 가능
- **좌표 자동 변환**: 구글맵에서 복사한 좌표 붙여넣기 시 자동 주소 변환
  - 지원 형식: `(25.055701, 121.519953)` 또는 `25.055701, 121.519953`
  - Google Geocoding API로 역지오코딩
  - **Plus Code 반환**: `3F4M+5G6 大安區 臺北市 대만` 형식의 상세 주소 반환
- 변환된 주소로 Google Maps 검색 가능

## 12. 실시간 평점

### 12.1 평점 조회
- 맛집 목록에서 실시간 Google 평점 표시
- 평점 높은 순 자동 정렬
- 로딩 중 스피너 표시

### 12.2 캐싱
- 가격대/전화번호/건물명 클라이언트 캐싱
- 이미지 URL 캐싱
- API 응답 캐싱

## 13. 맛집 등록 히스토리

### 13.1 히스토리 목록
- 로그인 사용자 전용 기능
- 사용자 메뉴에서 "등록 히스토리" 접근
- 테이블 형태로 등록/수정/삭제 내역 표시

### 13.2 표시 정보
- 순번 (seq): 자동 증가 번호
- 날짜: 등록/수정/삭제 일시
- 맛집명: 등록된 맛집 이름
- 지역: 간단한 주소 (구/동 단위)
- 카테고리: 맛집 카테고리
- 상태: 등록(녹색)/삭제(빨강)/수정(파랑) 배지

### 13.3 자동 기록
- 맛집 등록 시 자동으로 히스토리 생성
- 맛집 삭제 시 자동으로 히스토리 생성
- 카테고리 수정 시 자동으로 히스토리 생성

### 13.4 페이지네이션
- 페이지당 20개 항목
- 최신순 정렬 (seq 내림차순)
- 이전/다음 페이지 네비게이션

### 13.5 반응형 레이아웃
- **모바일**: 카드 형식 레이아웃
  - 상단: 번호, 상태 배지, 카테고리 / 날짜(우측)
  - 중간: 맛집명 (클릭 시 상세 이동)
  - 하단: 지역, 메모
- **데스크탑**: 테이블 형식 레이아웃
  - 컬럼: #, 날짜, 맛집명, 지역, 카테고리, 상태
  - overflow-hidden으로 텍스트 겹침 방지
